<div *ngIf="!loading" class="pane" [style.width.px]="size" [style.height.px]="size">

    <!-- Found composite icon -->
    <ng-container *ngIf="icon">
      <ng-container *ngFor="let i of icon?.iconStack">
        <div class="img"  *ngIf="getIconUrl(i) as iconUrl; else error"
          [class.flip-h]="i.options.flipH && !i.options.flipV"
          [class.flip-v]="i.options.flipV && !i.options.flipH"
          [class.flip-h-v]="i.options.flipV && i.options.flipH"
          [style.width.px]="scaledValue(i.options.scaleSize.x)"
          [style.height.px]="scaledValue(i.options.scaleSize.y)"
          [style.top.px]="scaledValue(i.options.point.y)"
          [style.left.px]="scaledValue(i.options.point.x)"
          [style.background-image]="'url(' + iconUrl + ')'">
        </div>

        <!-- Primitive icon is not found -->
        <ng-template #error>
          <div class="img error"
            [class.flip-h]="i.options.flipH && !i.options.flipV"
            [class.flip-v]="i.options.flipV && !i.options.flipH"
            [class.flip-h-v]="i.options.flipV && i.options.flipH"
            [style.width.px]="scaledValue(i.options.scaleSize.x)"
            [style.height.px]="scaledValue(i.options.scaleSize.y)"
            [style.top.px]="scaledValue(i.options.point.y)"
            [style.left.px]="scaledValue(i.options.point.x)">
          </div>
        </ng-template>
      </ng-container>

    </ng-container>

    <!-- Fallback icon -->
    <ng-container *ngIf="fallBackIconUrl">
        <div class="img fallback" [style.background-image]="'url(' + fallBackIconUrl + ')'"></div>
    </ng-container>

    <ng-container *ngIf="!fallBackIconUrl && !icon">
        <div class="error"></div>
    </ng-container>
</div>
