<hxgn-common-expansion-panel panelState="expanded">
    <hxgn-common-expansion-panel-header>
        <span>
            <hxgn-commonlocalization-translate-v1 [token]="tokens.alarmHistory" skeletonWidth="80px">
            </hxgn-commonlocalization-translate-v1>
        </span>
    </hxgn-common-expansion-panel-header>
    <hxgn-common-expansion-panel-content>
        <div class="history-container"
            *ngIf="alarmHistory.length && !alarmsLoading && !assetAssociationsLoading && !deviceAssociationsLoading">
            <ng-container *ngFor="let history of alarmHistory">
                <div class="history-item" *ngIf="history.operations.length">
                    <hxgn-alarms-history-item [operations]="history.operations" [concise]="true" [alarm]="alarm">
                    </hxgn-alarms-history-item>
                    <div class="time-since">{{history.timestampDate | commonTimeSince: refreshToggle | async}}</div>
                </div>
            </ng-container>
            <div class="show-more-container" *ngIf="alarmHistory.length > 1" (click)="openHistoryDialog()">
                <span>
                    (<hxgn-commonlocalization-translate-v1 [token]="tokens.showAllEntries" skeletonWidth="95px">
                    </hxgn-commonlocalization-translate-v1>)...
                </span>
                <img src="assets/alarms-core/images/expand-arrow.png" height="10" width="16" />
            </div>
        </div>
        <div class="history-container" *ngIf="alarmsLoading || assetAssociationsLoading || deviceAssociationsLoading">
            <div class="loading-pane">
                <mat-spinner></mat-spinner>
            </div>
        </div>
    </hxgn-common-expansion-panel-content>
</hxgn-common-expansion-panel>